@prefix adms: <http://www.w3.org/ns/adms#> .
@prefix cc: <http://creativecommons.org/ns#> .
@prefix core: <http://data.sparna.fr/ontologies/sparnatural-config-core#> .
@prefix datasources: <http://data.sparna.fr/ontologies/sparnatural-config-datasources#> .
@prefix dcat: <http://www.w3.org/ns/dcat#> .
@prefix dce: <http://purl.org/dc/elements/1.1/> .
@prefix doap: <http://usefulinc.com/ns/doap#> .
@prefix edm: <http://www.europeana.eu/schemas/edm/> .
@prefix euvoc: <http://publications.europa.eu/ontology/euvoc#> .
@prefix foaf: <http://xmlns.com/foaf/0.1/> .
@prefix ore: <http://www.openarchives.org/ore/terms/> .
@prefix org: <http://www.w3.org/ns/org#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix prov: <http://www.w3.org/ns/prov#> .
@prefix qb: <http://purl.org/linked-data/cube#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix schema: <http://schema.org/> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .
@prefix skosthes: <http://purl.org/iso25964/skos-thes#> .
@prefix skosxl: <http://www.w3.org/2008/05/skos-xl#> .
@prefix terms: <http://purl.org/dc/terms/> .
@prefix this: <http://sparnatural.eu/demos/demo-edm/sparnatural-config.ttl/> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

<http://sparnatural.eu/demos/demo-edm/sparnatural-config.ttl> a owl:Ontology;
  terms:format <https://docs.google.com/spreadsheets/d/14Ak0N8fE8kFpmFA0cjApLDvE2BFiNa7ypa2Yk7v1pO4/export?format=xlsx>,
    <https://xls2rdf.sparna.fr/rest/convert?url=https%3A%2F%2Fdocs.google.com%2Fspreadsheets%2Fd%2F14Ak0N8fE8kFpmFA0cjApLDvE2BFiNa7ypa2Yk7v1pO4%2Fexport%3Fformat%3Dxlsx&noPostProcessings=true>;
  terms:source <https://docs.google.com/spreadsheets/d/14Ak0N8fE8kFpmFA0cjApLDvE2BFiNa7ypa2Yk7v1pO4>;
  owl:imports <http://data.sparna.fr/ontologies/sparnatural-config-core>, <http://data.sparna.fr/ontologies/sparnatural-config-datasources> .

ore:Aggregation a owl:Class;
  core:defaultLabelProperty this:aggredatedCHO_title;
  core:faIcon "fa-regular fa-newspaper";
  core:order 1;
  core:tooltip "A package of resources about one cultural heritage object."@en, "Lot de ressources assemblées entre elles autour d'un même objet culturel."@fr;
  rdfs:label "Aggregation"@en, "Vue catalogue"@fr;
  rdfs:subClassOf core:SparnaturalClass .

edm:ProvidedCHO a owl:Class;
  core:defaultLabelProperty dce:title;
  core:faIcon "fa-regular fa-palette";
  core:order 4;
  core:tooltip "Sujet principal du lot de données qui a été fourni à Europeana."@fr,
    "The subject of the package of data that has been submitted to Europeana."@en;
  rdfs:label "Objet culturel"@fr, "Provided CHO"@en;
  rdfs:subClassOf core:SparnaturalClass .

edm:WebResource a owl:Class;
  core:faIcon "fa-regular fa-image";
  core:order 5;
  rdfs:label "Visuel"@fr, "Web Resource"@en;
  rdfs:subClassOf core:NotInstantiatedClass, rdfs:Literal .

this:CatalogURL a owl:Class;
  core:faIcon "fa-regular fa-globe";
  core:order 7;
  rdfs:label "Catalog URL"@en, "URL Catalogue"@fr;
  rdfs:subClassOf core:NotInstantiatedClass, rdfs:Literal .

cc:License a owl:Class;
  core:faIcon "fa-brands fa-creative-commons";
  core:order 6;
  rdfs:label "Licence"@fr, "License"@en;
  rdfs:subClassOf core:NotInstantiatedClass .

this:PlaceIRI a owl:Class;
  core:faIcon "fa-regular fa-location-dot";
  core:order "12.1"^^xsd:integer;
  rdfs:label "Lieu (IRI)"@fr, "Place (IRI)"@en;
  rdfs:subClassOf core:NotInstantiatedClass .

this:DCTypeIRI a owl:Class;
  core:faIcon "fa-regular fa-photo-film-music";
  core:order "6.1"^^xsd:integer;
  rdfs:label "DC Type (IRI)"@en, "Type DC (IRI)"@fr;
  rdfs:subClassOf core:NotInstantiatedClass .

skos:Concept a owl:Class;
  core:faIcon "fa-regular fa-hashtag";
  core:order 14;
  rdfs:label "Subject"@en, "Sujet"@fr;
  rdfs:subClassOf rdfs:Literal .

edm:Agent a owl:Class;
  core:faIcon "fa-regular fa-user-large";
  core:order 3;
  rdfs:label "Auteur"@fr, "Author"@en;
  rdfs:subClassOf rdfs:Literal .

edm:Place a owl:Class;
  core:faIcon "fa-regular fa-location-dot";
  core:order 12;
  rdfs:label "Localisation"@fr, "Place"@en;
  rdfs:subClassOf rdfs:Literal .

edm:TimeSpan a owl:Class;
  core:faIcon "fa-regular fa-hourglass";
  core:order 11;
  rdfs:label "Période"@fr, "Time Span"@en;
  rdfs:subClassOf rdfs:Literal .

foaf:Organization a owl:Class;
  core:faIcon "fa-regular fa-landmark";
  core:order 3;
  rdfs:label "Centre culturel"@fr, "Organization"@en;
  rdfs:subClassOf rdfs:Literal .

this:Aggregator a owl:Class;
  core:faIcon "fa-regular fa-diagram-project";
  core:order 2;
  rdfs:label "Aggregator"@en, "Agrégateur"@fr;
  rdfs:subClassOf rdfs:Literal .

this:Date a owl:Class;
  core:faIcon "fa-regular fa-calendar-days";
  core:order 4;
  rdfs:label "Date"@en, "Date"@fr;
  rdfs:subClassOf rdfs:Literal .

this:Description a owl:Class;
  core:faIcon "fa-sharp fa-regular fa-circle-info";
  core:order 13;
  rdfs:label "Description"@en, "Notes"@fr;
  rdfs:subClassOf rdfs:Literal .

this:Format a owl:Class;
  core:faIcon "fa-sharp fa-regular fa-expand";
  core:order 8;
  rdfs:label "Format"@en, "Format"@fr;
  rdfs:subClassOf rdfs:Literal .

this:Identifier a owl:Class;
  core:faIcon "fa-regular fa-barcode";
  core:order 15;
  rdfs:label "Identifiant"@fr, "Identifier"@en;
  rdfs:subClassOf rdfs:Literal .

this:Language a owl:Class;
  core:faIcon "fa-regular fa-language";
  core:order 5;
  rdfs:label "Language"@en, "Langue"@fr;
  rdfs:subClassOf rdfs:Literal .

this:Title a owl:Class;
  core:faIcon "fa-regular fa-angles-left";
  core:order 2;
  rdfs:label "Title"@en, "Titre"@fr;
  rdfs:subClassOf rdfs:Literal .

this:DCType a owl:Class;
  core:faIcon "fa-regular fa-photo-film-music";
  core:order 6;
  rdfs:label "DC Type"@en, "Type DC"@fr;
  rdfs:subClassOf rdfs:Literal .

this:Provenance a owl:Class;
  core:faIcon "fa-regular fa-hand-holding";
  core:order 10;
  rdfs:label "Donateur"@fr, "Provenance"@en;
  rdfs:subClassOf rdfs:Literal .

this:EDMType a owl:Class;
  core:faIcon "fa-regular fa-photo-film-music";
  core:order 7;
  rdfs:label "EDM Type"@en, "Type EDM"@fr;
  rdfs:subClassOf rdfs:Literal .

this:Extent a owl:Class;
  core:faIcon "fa-regular fa-ruler-horizontal";
  core:order 9;
  rdfs:label "Dimensions"@fr, "Extent"@en;
  rdfs:subClassOf rdfs:Literal .

edm:dataProvider a owl:ObjectProperty;
  rdfs:domain ore:Aggregation;
  rdfs:label "data provider"@en, "est fournie par"@fr;
  rdfs:range foaf:Organization;
  rdfs:subPropertyOf core:ListProperty .

edm:isShownAt a owl:ObjectProperty;
  rdfs:domain ore:Aggregation;
  rdfs:label "est accessible à l'adresse"@fr, "is shown at"@en;
  rdfs:range this:CatalogURL;
  rdfs:subPropertyOf core:NonSelectableProperty .

edm:isShownBy a owl:ObjectProperty;
  core:enableOptional true;
  rdfs:domain ore:Aggregation;
  rdfs:label "contient"@fr, "is shown by"@en;
  rdfs:range edm:WebResource;
  rdfs:subPropertyOf core:NonSelectableProperty .

edm:provider a owl:ObjectProperty;
  rdfs:domain ore:Aggregation;
  rdfs:label "est issue de"@fr, "provider"@en;
  rdfs:range this:Aggregator;
  rdfs:subPropertyOf core:ListProperty .

edm:rights a owl:ObjectProperty;
  rdfs:domain ore:Aggregation;
  rdfs:label "est protégée par"@fr, "rights"@en;
  rdfs:range cc:License;
  rdfs:subPropertyOf core:ListProperty .

edm:aggregatedCHO a owl:ObjectProperty;
  rdfs:domain ore:Aggregation;
  rdfs:label "aggregated CHO"@en, "concerne"@fr;
  rdfs:range edm:ProvidedCHO;
  rdfs:subPropertyOf core:NonSelectableProperty .

dce:creator a owl:ObjectProperty;
  core:enableOptional true;
  rdfs:domain edm:ProvidedCHO;
  rdfs:label "creator"@en, "créé par"@fr;
  rdfs:range edm:Agent;
  rdfs:subPropertyOf core:ListProperty .

dce:description a owl:ObjectProperty;
  core:enableOptional true;
  rdfs:domain edm:ProvidedCHO;
  rdfs:label "a pour description"@fr, "description"@en;
  rdfs:range this:Description;
  rdfs:subPropertyOf core:SearchProperty .

dce:format a owl:ObjectProperty;
  core:enableOptional true;
  rdfs:domain edm:ProvidedCHO;
  rdfs:label "est au format"@fr, "format"@en;
  rdfs:range this:Format;
  rdfs:subPropertyOf core:ListProperty .

dce:identifier a owl:ObjectProperty;
  rdfs:domain edm:ProvidedCHO;
  rdfs:label "est référencé sous"@fr, "identifier"@en;
  rdfs:range this:Identifier;
  rdfs:subPropertyOf core:AutocompleteProperty .

dce:language a owl:ObjectProperty;
  rdfs:domain edm:ProvidedCHO;
  rdfs:label "est disponible en"@fr, "language"@en;
  rdfs:range this:Language;
  rdfs:subPropertyOf core:ListProperty .

dce:subject a owl:ObjectProperty;
  core:enableOptional true;
  rdfs:domain edm:ProvidedCHO;
  rdfs:label "a pour sujet"@fr, "subject"@en;
  rdfs:range skos:Concept;
  rdfs:subPropertyOf core:AutocompleteProperty .

dce:title a owl:ObjectProperty;
  rdfs:domain edm:ProvidedCHO;
  rdfs:label "a pour titre"@fr, "title"@en;
  rdfs:range this:Title;
  rdfs:subPropertyOf core:SearchProperty .

dce:type a owl:ObjectProperty;
  rdfs:domain edm:ProvidedCHO;
  rdfs:label "est de type DC"@fr, "type"@en;
  rdfs:range this:DCType;
  rdfs:subPropertyOf core:ListProperty .

terms:created a owl:ObjectProperty;
  core:enableOptional true;
  rdfs:domain edm:ProvidedCHO;
  rdfs:label "created"@en, "créé en"@fr;
  rdfs:range this:Date;
  rdfs:subPropertyOf core:ListProperty .

terms:extent a owl:ObjectProperty;
  core:enableOptional true;
  rdfs:domain edm:ProvidedCHO;
  rdfs:label "a pour étendue"@fr, "extent"@en;
  rdfs:range this:Extent;
  rdfs:subPropertyOf core:SearchProperty .

terms:provenance a owl:ObjectProperty;
  core:enableOptional true;
  rdfs:domain edm:ProvidedCHO;
  rdfs:label "a pour origine"@fr, "provenance"@en;
  rdfs:range this:Provenance;
  rdfs:subPropertyOf core:SearchProperty .

terms:spatial a owl:ObjectProperty;
  core:enableOptional true;
  rdfs:domain edm:ProvidedCHO;
  rdfs:label "concerne"@fr, "spatial"@en;
  rdfs:range edm:Place;
  rdfs:subPropertyOf core:ListProperty .

edm:type a owl:ObjectProperty;
  rdfs:domain edm:ProvidedCHO;
  rdfs:label "est de type EDM"@fr, "type"@en;
  rdfs:range this:EDMType;
  rdfs:subPropertyOf core:ListProperty .

this:aggredatedCHO_title a owl:ObjectProperty;
  core:sparqlString "<http://www.europeana.eu/schemas/edm/aggregatedCHO>/<http://purl.org/dc/elements/1.1/title>";
  rdfs:range this:Title;
  rdfs:subPropertyOf core:SearchProperty .

this:aggredatedIn a owl:ObjectProperty;
  core:sparqlString "^<http://www.europeana.eu/schemas/edm/aggregatedCHO>";
  rdfs:domain edm:ProvidedCHO;
  rdfs:label "aggregated in"@en, "présenté dans"@fr;
  rdfs:range ore:Aggregation;
  rdfs:subPropertyOf core:NonSelectableProperty .

this:spatialIRI a owl:ObjectProperty;
  core:sparqlString "<http://purl.org/dc/terms/spatial>";
  datasources:datasource datasources:list_URI_count;
  rdfs:domain edm:ProvidedCHO;
  rdfs:label "concerne"@fr, "spatial (IRI)"@en;
  rdfs:range this:PlaceIRI;
  rdfs:subPropertyOf core:ListProperty .

this:hasdcTypeIRI a owl:ObjectProperty;
  core:sparqlString "<http://purl.org/dc/elements/1.1/type>";
  datasources:datasource datasources:list_URI_count;
  rdfs:domain edm:ProvidedCHO;
  rdfs:label "dc type (IRI)"@en, "est de type DC"@fr;
  rdfs:range this:DCTypeIRI;
  rdfs:subPropertyOf core:ListProperty .

this:list_skosprefLabel_alpha_with_count_langfr a datasources:SparqlDatasource;
  datasources:labelProperty skos:prefLabel;
  datasources:queryTemplate this:query_list_label_alpha_with_count_langfr .

this:list_skosprefLabel_count_langfr a datasources:SparqlDatasource;
  datasources:labelProperty skos:prefLabel;
  datasources:queryTemplate this:query_list_label_count_langfr .

this:list_rdfslabel_alpha_with_count_langfr a datasources:SparqlDatasource;
  datasources:labelProperty rdfs:label;
  datasources:queryTemplate this:query_list_label_alpha_with_count_langfr .

this:list_skosprefLabel_alpha_langfr a datasources:SparqlDatasource;
  datasources:labelProperty skos:prefLabel;
  datasources:queryTemplate this:query_list_label_alpha_langfr .

this:search_skospreflabel_contains_langfr a datasources:SparqlDatasource;
  datasources:labelProperty skos:prefLabel;
  datasources:queryTemplate this:query_search_label_contains_langfr .

this:search_rdfslabel_contains_langfr a datasources:SparqlDatasource;
  datasources:labelProperty rdfs:label;
  datasources:queryTemplate this:query_search_label_contains_langfr .

this:query_list_label_alpha_with_count_langfr a "config-datatsources:SPARQLQuery";
  datasources:queryString """SELECT DISTINCT ?uri ?count (CONCAT(STR(?theLabel), ' (', STR(?count), ')') AS ?label)
WHERE {
{
 SELECT DISTINCT ?uri (COUNT(?domain) AS ?count)
 WHERE {
 ?domain a $domain .
 ?domain $property ?uri .
 FILTER(isIRI(?uri))
 # Note how the range criteria is not used in this query
 }
 GROUP BY ?uri
}
OPTIONAL { ?uri $labelPath ?theLabelLang . FILTER(lang(?theLabelLang) = $lang) }
OPTIONAL { ?uri $labelPath ?theLabelNone . FILTER(lang(?theLabelNone) = \"\") }
OPTIONAL { ?uri $labelPath ?theLabelFr . FILTER(lang(?theLabelFr) = \"fr\") }
BIND(COALESCE(?theLabelLang, ?theLabelNone, ?theLabelFr, STR(?uri)) AS ?theLabel)
}
ORDER BY UCASE(?label)
LIMIT 500""" .

this:query_list_label_count_langfr a "config-datatsources:SPARQLQuery";
  datasources:queryString """SELECT ?uri ?count (CONCAT(STR(?theLabel), ' (', STR(?count), ')') AS ?label)
WHERE {
{
 SELECT DISTINCT ?uri (COUNT(?domain) AS ?count)
 WHERE {
 ?domain a $domain .
 ?domain $property ?uri .
 FILTER(isIRI(?uri))
 # Note how the range criteria is not used in this query
 }
 GROUP BY ?uri
}
OPTIONAL { ?uri $labelPath ?theLabelLang . FILTER(lang(?theLabelLang) = $lang) }
OPTIONAL { ?uri $labelPath ?theLabelNone . FILTER(lang(?theLabelNone) = \"\") }
OPTIONAL { ?uri $labelPath ?theLabelFr . FILTER(lang(?theLabelFr) = \"fr\") }
BIND(COALESCE(?theLabelLang, ?theLabelNone, ?theLabelFr) AS ?theLabel)
}
ORDER BY DESC(?count) UCASE(?label)
LIMIT 500""" .

this:query_list_label_alpha_langfr a "config-datatsources:SPARQLQuery";
  datasources:queryString """SELECT DISTINCT ?uri ?label
WHERE {
 ?domain a $domain .
 ?domain $property ?uri .
 # Note how the range criteria is not used in this query
 FILTER(isIRI(?uri))

 OPTIONAL { ?uri $labelPath ?theLabelLang . FILTER(lang(?theLabelLang) = $lang) }
 OPTIONAL { ?uri $labelPath ?theLabelNone . FILTER(lang(?theLabelNone) = \"\") }
 OPTIONAL { ?uri $labelPath ?theLabelFr . FILTER(lang(?theLabelFr) = \"fr\") }
 BIND(COALESCE(?theLabelLang, ?theLabelNone, ?theLabelFr) AS ?label)
}
ORDER BY UCASE(?label)
LIMIT 500""" .

this:query_search_label_contains_langfr a "config-datatsources:SPARQLQuery";
  datasources:queryString """SELECT DISTINCT ?uri ?label
WHERE {
 ?domain a $domain .
 ?domain $property ?uri .
 ?uri a $range .
 ?uri $labelPath ?label .
 FILTER(isIRI(?uri))
 FILTER(CONTAINS(LCASE(STR(?label)), LCASE(\"$key\"))) 
 FILTER(lang(?label) = '' || lang(?label) = \"fr\")
} 
ORDER BY UCASE(?label)
LIMIT 50""" .
